---
import { getCollection } from 'astro:content';
import Base from "../layouts/Base.astro";

const base = import.meta.env.BASE_URL;

// Get all articles and sort by order
const articles = await getCollection('articles');
const sortedArticles = articles
    .filter(a => a.slug !== 'home')
    .sort((a, b) => (a.data.order ?? 99) - (b.data.order ?? 99));
---

<Base
	title="Silent Hill"
	subtitle="Biblical Themes & Occult References"
	symbol="☩"
>
	<div class="home-content-wrapper">
		<div class="home-intro">
			<div class="big-symbol glitch-text">☩</div>
			<h1 class="glitch-text">SILENT HILL</h1>
			<p class="tagline">BIBLICAL THEMES & OCCULT REFERENCES</p>
			<div class="divider"></div>
		</div>

		<p class="home-description">
			The Silent Hill franchise weaves together Judeo-Christian scripture,
			Kabbalistic mysticism, Solomonic demonology, and Gnostic theology to
			create its uniquely disturbing religious horror. This compendium
			documents the biblical connections to the Order's syncretic belief
			system.
		</p>

		<div class="article-grid">
		{sortedArticles.map((article) => (
			<a href={`${base}/${article.slug}/`} class="article-card">
				<div class="article-symbol">{article.data.symbol || '☩'}</div>
				<div class="article-content">
					<h2 class="article-title">{article.data.title}</h2>
					{article.data.subtitle && (
						<p class="article-subtitle">{article.data.subtitle}</p>
					)}
					{article.data.description && (
						<p class="article-description">{article.data.description}</p>
					)}
				</div>
			</a>
		))}
		</div>
	</div>
</Base>
